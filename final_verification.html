<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Final Verification - Royal Enfield Price Predictor</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f8f9fa;
        }
        .card {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 25px;
            margin: 20px 0;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border-radius: 5px;
        }
        .test-section.pass {
            background-color: #d4edda;
            border-left: 4px solid #28a745;
        }
        .test-section.fail {
            background-color: #f8d7da;
            border-left: 4px solid #dc3545;
        }
        .test-section.warning {
            background-color: #fff3cd;
            border-left: 4px solid #ffc107;
        }
        .test-title {
            font-weight: bold;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
        }
        .status-badge {
            padding: 3px 8px;
            border-radius: 3px;
            font-size: 12px;
            font-weight: bold;
        }
        .status-badge.pass {
            background-color: #28a745;
            color: white;
        }
        .status-badge.fail {
            background-color: #dc3545;
            color: white;
        }
        .status-badge.warning {
            background-color: #ffc107;
            color: black;
        }
        button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px;
        }
        button:hover {
            background-color: #0056b3;
        }
        .model-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 10px;
            margin: 15px 0;
        }
        .model-item {
            padding: 10px;
            border-radius: 5px;
            text-align: center;
            font-size: 14px;
        }
        .model-item.pass {
            background-color: #d4edda;
            border: 1px solid #c3e6cb;
        }
        .model-item.fail {
            background-color: #f8d7da;
            border: 1px solid #f5c6cb;
        }
        .model-item.warning {
            background-color: #fff3cd;
            border: 1px solid #ffeaa7;
        }
        .details {
            font-size: 14px;
            margin-top: 10px;
            padding: 10px;
            background-color: rgba(0,0,0,0.05);
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <div class="card">
        <h1>Final Verification</h1>
        <p>Complete verification of Royal Enfield Price Predictor functionality</p>
        
        <button id="runVerification">Run Full Verification</button>
        
        <div id="verificationResults"></div>
    </div>

    <script>
        // List of all models
        const allModels = [
            "Classic 350", "Bullet 350", "Himalayan", "Meteor 350", "Hunter 350",
            "Continental GT 650", "INT 650", "Scram 411", "Guerrilla 450", "Himalayan 450",
            "Super Meteor 650", "Bullet 650", "Goan Classic 350", "Bear 650", "Shotgun 650",
            "Scrambler 450", "Himalayan 750", "Flying Flea", "Interceptor 650"
        ];

        // Model information with pros and cons
        const bikeInfo = {
            "Classic 350": {
                pros: ["Timeless design", "Great build quality", "Comfortable for long rides", "Good resale value"],
                cons: ["Heavy weight", "Less powerful compared to newer models", "Basic features"]
            },
            "Bullet 350": {
                pros: ["Iconic design", "Very comfortable seating", "Excellent build quality", "Unique thump sound"],
                cons: ["Heavy and difficult to maneuver", "Low power output", "High maintenance cost"]
            },
            "Himalayan": {
                pros: ["Adventure touring capability", "Upright riding position", "Good ground clearance", "Affordable adventure bike"],
                cons: ["Less powerful engine", "Basic features", "Not ideal for highway cruising"]
            },
            "Meteor 350": {
                pros: ["Modern cruiser design", "Powerful engine", "Comfortable for city and highway", "Good features"],
                cons: ["Higher price point", "Less luggage space", "Not suitable for off-roading"]
            },
            "Hunter 350": {
                pros: ["Retro cafe racer design", "Lightweight and agile", "Fuel efficient", "Affordable price"],
                cons: ["Less comfortable for long rides", "Limited touring capability", "Basic instrumentation"]
            },
            "Continental GT 650": {
                pros: ["Premium cafe racer design", "Powerful 650cc engine", "Excellent performance", "High-quality components"],
                cons: ["Higher price point", "Less practical for daily commuting", "Requires more maintenance"]
            },
            "INT 650": {
                pros: ["Versatile design", "Strong 650cc engine", "Good for both city and touring", "Modern features"],
                cons: ["Higher cost than 350cc models", "More complex maintenance", "Heavier than 350cc bikes"]
            },
            "Scram 411": {
                pros: ["Adventure styling", "Good ground clearance", "Lightweight", "Fuel efficient"],
                cons: ["Less powerful engine", "Limited luggage capacity", "Basic features"]
            },
            "Guerrilla 450": {
                pros: ["Adventure touring focus", "Modern engine technology", "Good performance", "Advanced features"],
                cons: ["Higher price", "More complex maintenance", "Less proven track record"]
            },
            "Himalayan 450": {
                pros: ["Upgraded adventure bike", "More powerful engine", "Improved performance", "Modern features"],
                cons: ["Higher cost", "More maintenance requirements", "Heavier than previous model"]
            },
            "Super Meteor 650": {
                pros: ["Powerful 650cc engine", "Modern cruiser design", "Excellent performance", "Premium components"],
                cons: ["Higher price point", "Heavier weight", "More complex maintenance"]
            },
            "Bullet 650": {
                pros: ["Iconic design with modern engine", "Powerful 650cc motor", "Improved performance", "Classic aesthetics"],
                cons: ["Higher cost than 350cc Bullet", "Heavier weight", "More maintenance required"]
            },
            "Goan Classic 350": {
                pros: ["Unique styling", "Classic design with modern touches", "Good build quality", "Distinctive appearance"],
                cons: ["Limited availability", "Specialized market", "May have lower resale value"]
            },
            "Bear 650": {
                pros: ["Powerful 650cc engine", "Sturdy build", "Good for touring", "Premium components"],
                cons: ["Higher price", "Heavy weight", "More complex maintenance"]
            },
            "Shotgun 650": {
                pros: ["Unique styling", "Powerful engine", "Distinctive design", "Premium features"],
                cons: ["Niche appeal", "Higher cost", "Specialized maintenance"]
            },
            "Scrambler 450": {
                pros: ["Adventure styling", "Modern engine", "Good ground clearance", "Versatile design"],
                cons: ["Less powerful than 650cc models", "Limited luggage space", "Specialized market"]
            },
            "Himalayan 750": {
                pros: ["Most powerful Royal Enfield engine", "Excellent performance", "Advanced features", "Premium build"],
                cons: ["Highest price point", "Most complex maintenance", "Heaviest model"]
            },
            "Flying Flea": {
                pros: ["Unique compact design", "Lightweight", "Fuel efficient", "Distinctive styling"],
                cons: ["Limited power", "Very specialized use", "Niche market appeal"]
            },
            "Interceptor 650": {
                pros: ["Classic retro design", "Powerful 650cc engine", "Good performance", "Premium components"],
                cons: ["Higher price", "More maintenance", "Heavier than 350cc models"]
            }
        };

        document.getElementById('runVerification').addEventListener('click', function() {
            runFullVerification();
        });

        async function runFullVerification() {
            const resultsDiv = document.getElementById('verificationResults');
            resultsDiv.innerHTML = '<p>Running verification tests...</p>';
            
            // Test 1: Model Data Validation
            const modelDataTest = await testModelData();
            displayTestResult('Model Data Validation', modelDataTest);
            
            // Test 2: Bike Info Validation
            const bikeInfoTest = testBikeInfo();
            displayTestResult('Bike Info Validation', bikeInfoTest);
            
            // Test 3: Individual Model Tests
            const individualModelTests = await testIndividualModels();
            displayTestResult('Individual Model Tests', individualModelTests);
            
            // Test 4: Integration Test
            const integrationTest = await testIntegration();
            displayTestResult('Integration Test', integrationTest);
            
            resultsDiv.innerHTML += '<h3>Verification Complete</h3>';
        }

        function displayTestResult(title, result) {
            const resultsDiv = document.getElementById('verificationResults');
            
            const sectionDiv = document.createElement('div');
            sectionDiv.className = `test-section ${result.status}`;
            
            const titleDiv = document.createElement('div');
            titleDiv.className = 'test-title';
            titleDiv.innerHTML = `
                <span>${title}</span>
                <span class="status-badge ${result.status}">${result.status.toUpperCase()}</span>
            `;
            
            sectionDiv.appendChild(titleDiv);
            
            if (result.message) {
                const messageDiv = document.createElement('div');
                messageDiv.className = 'details';
                messageDiv.textContent = result.message;
                sectionDiv.appendChild(messageDiv);
            }
            
            if (result.models) {
                const modelGrid = document.createElement('div');
                modelGrid.className = 'model-grid';
                
                result.models.forEach(model => {
                    const modelItem = document.createElement('div');
                    modelItem.className = `model-item ${model.status || 'pass'}`;
                    modelItem.textContent = model.name;
                    modelGrid.appendChild(modelItem);
                });
                
                sectionDiv.appendChild(modelGrid);
            }
            
            resultsDiv.appendChild(sectionDiv);
        }

        async function testModelData() {
            try {
                const response = await fetch('model_data.json');
                const modelData = await response.json();
                
                // Check if all models are present
                const missingModels = [];
                allModels.forEach(model => {
                    if (!modelData.mappings.model_mapping.hasOwnProperty(model)) {
                        missingModels.push(model);
                    }
                });
                
                if (missingModels.length === 0) {
                    return {
                        status: 'pass',
                        message: 'All models are present in model_data.json'
                    };
                } else {
                    return {
                        status: 'fail',
                        message: `Missing models: ${missingModels.join(', ')}`
                    };
                }
            } catch (error) {
                return {
                    status: 'fail',
                    message: `Error loading model_data.json: ${error.message}`
                };
            }
        }

        function testBikeInfo() {
            const missingModels = [];
            allModels.forEach(model => {
                if (!bikeInfo.hasOwnProperty(model)) {
                    missingModels.push(model);
                }
            });
            
            if (missingModels.length === 0) {
                return {
                    status: 'pass',
                    message: 'All models have bike info with pros and cons'
                };
            } else {
                return {
                    status: 'fail',
                    message: `Missing bike info for models: ${missingModels.join(', ')}`
                };
            }
        }

        async function testIndividualModels() {
            const modelResults = [];
            let passCount = 0;
            let failCount = 0;
            
            for (const model of allModels) {
                const hasBikeInfo = bikeInfo.hasOwnProperty(model);
                const hasProperStructure = hasBikeInfo && 
                    Array.isArray(bikeInfo[model].pros) && 
                    Array.isArray(bikeInfo[model].cons);
                
                const status = (hasBikeInfo && hasProperStructure) ? 'pass' : 'fail';
                
                modelResults.push({
                    name: model,
                    status: status
                });
                
                if (status === 'pass') {
                    passCount++;
                } else {
                    failCount++;
                }
            }
            
            const status = failCount === 0 ? 'pass' : 'fail';
            const message = `${passCount} models passed, ${failCount} models failed`;
            
            return {
                status: status,
                message: message,
                models: modelResults
            };
        }

        async function testIntegration() {
            // This would test the actual integration, but for now we'll just verify
            // that all components are present
            try {
                // Check if all required elements exist in the DOM
                const requiredElements = [
                    'predictionForm', 'model', 'year', 'presentPrice', 
                    'kmsDriven', 'owner', 'transmission', 'resultCard',
                    'modelInfoCard', 'insightsCard'
                ];
                
                const missingElements = [];
                requiredElements.forEach(elementId => {
                    if (!document.getElementById(elementId)) {
                        missingElements.push(elementId);
                    }
                });
                
                if (missingElements.length === 0) {
                    return {
                        status: 'pass',
                        message: 'All required DOM elements are present'
                    };
                } else {
                    return {
                        status: 'warning',
                        message: `Missing DOM elements: ${missingElements.join(', ')}`
                    };
                }
            } catch (error) {
                return {
                    status: 'fail',
                    message: `Error during integration test: ${error.message}`
                };
            }
        }
    </script>
</body>
</html>